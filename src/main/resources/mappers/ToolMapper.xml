<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.mapper.ToolMapper">

    <resultMap id="toolResultMap" type="com.example.demo.entities.Tool">
        <result property = "id" column = "id" />
        <result property = "code" column = "tool_code" />
        <result property = "type" column = "tool_type" />
        <result property = "brand" column = "brand" />
        <result property = "rentalCosts.id" column = "id" />
        <result property = "rentalCosts.type" column = "tool_type" />
        <result property = "rentalCosts.dailyCharge" column = "daily_charge" />
        <result property = "rentalCosts.weekdayCharge" column = "weekday_charge" />
        <result property = "rentalCosts.weekendCharge" column = "weekend_charge" />
        <result property = "rentalCosts.holidayCharge" column = "holiday_charge" />
    </resultMap>

    <select id="findAll" resultMap="toolResultMap">
        SELECT t.id,
               t.tool_type,
               t.tool_code,
               t.brand,
               rentalCosts.id,
               rentalCosts.tool_type,
               rentalCosts.daily_charge,
               rentalCosts.weekday_charge,
               rentalCosts.weekend_charge,
               rentalCosts.holiday_charge
        FROM tool as t
        JOIN rental_cost as rentalCosts
        ON t.tool_type = rentalCosts.tool_type
    </select>

    <select id="findByCode" parameterType="String" resultMap="toolResultMap">
        SELECT t.id,
               t.tool_type,
               t.tool_code,
               t.brand,
               rentalCosts.id,
               rentalCosts.tool_type,
               rentalCosts.daily_charge,
               rentalCosts.weekday_charge,
               rentalCosts.weekend_charge,
               rentalCosts.holiday_charge
        FROM tool as t
        JOIN rental_cost as rentalCosts
        ON t.tool_type = rentalCosts.tool_type and t.tool_code = #{code}
    </select>

    <select id="findByType" parameterType="String" resultMap="toolResultMap">
        SELECT t.id,
               t.tool_type,
               t.tool_code,
               t.brand,
               rentalCosts.id,
               rentalCosts.tool_type,
               rentalCosts.daily_charge,
               rentalCosts.weekday_charge,
               rentalCosts.weekend_charge,
               rentalCosts.holiday_charge
        FROM tool as t
        JOIN rental_cost as rentalCosts
        ON t.tool_type = rentalCosts.tool_type and t.tool_type = #{type}
    </select>

    <select id="findByBrand" parameterType="String" resultType="com.example.demo.entities.Tool">
        SELECT t.id,
               t.tool_type,
               t.tool_code,
               t.brand,
               rentalCosts.id,
               rentalCosts.tool_type,
               rentalCosts.daily_charge,
               rentalCosts.weekday_charge,
               rentalCosts.weekend_charge,
               rentalCosts.holiday_charge
        FROM tool as t
        JOIN rental_cost as rentalCosts
        ON t.tool_type = rentalCosts.tool_type and t.brand = #{brand}
    </select>

</mapper>